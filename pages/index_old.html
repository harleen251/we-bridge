<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>WeBridge - Home</title>
        <script src="./js/index.js" defer></script>
        <link rel="stylesheet" href="./css/style.css">
    </head>
    <body>
        <h2>WeBridge - Home Page</h2>

        <button id="btnLogin" onclick="document.getElementById('divLogin').style.display='block'">Login / Sign Up</button>

        <div id="divLogin" class="modal">        
            <form id="frmLogin" class="modal-content animate">
                <div class="imgcontainer">
                    <span onclick="document.getElementById('divLogin').style.display='none'" class="close" title="Close Modal">&times;</span>
                </div>
                <div class="container">
                    <label for="txtName"><b>Username</b></label>
                    <input type="text" placeholder="Enter Username" name="txtName" required>
                    <label for="txtPsw"><b>Password</b></label>
                    <input type="password" placeholder="Enter Password" name="txtPsw" required>
                    <div class="radio-container">
                        <label>
                            <input type="radio" name="logintype" value="volunteer" required>Volunteer
                        </label>
                        <label>
                            <input type="radio" name="logintype" value="organization">Organization
                        </label>
                    </div>                    
                    <button type="submit">Login</button>                
                </div>
                <div class="container" style="background-color:#f1f1f1">
                    <!-- <button type="button" onclick="document.getElementById('divLogin').style.display='none'" class="cancelbtn">Cancel</button> -->
                    <p><span class="psw">Sign Up As <a href="./volunteer_signup.html">Volunteer</a> / <a href="./organization_signup.html">Organization</a></span></p>
                </div>
            </form>
        </div>       
    </body>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        import { getAnalytics} from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";
        import { getFirestore, collection, doc, setDoc, getDocs , getDoc , query, where, and} from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        // Test DB
        // const firebaseConfig = {
        //   apiKey: "AIzaSyD05lFcGHExevb6u3mep8zTgn76ImlRIY4",
        //   authDomain: "testdb-ea112.firebaseapp.com",
        //   projectId: "testdb-ea112",
        //   storageBucket: "testdb-ea112.appspot.com",
        //   messagingSenderId: "127695240603",
        //   appId: "1:127695240603:web:d5c94b680f5de4b739753e",
        //   measurementId: "G-EGSKS099E2"
        // };

        const firebaseConfig = {
            apiKey: "AIzaSyBiW_sL8eKxcQ7T9xKqQJxxRaIHmizOBoE",
            authDomain: "webridge-81f09.firebaseapp.com",
            projectId: "webridge-81f09",
            storageBucket: "webridge-81f09.appspot.com",
            messagingSenderId: "950961168294",
            appId: "1:950961168294:web:1cc48025ccfb341ea93967",
            measurementId: "G-VWM7GNP66X"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        // Initialize Cloud Firestore and get a reference to the service
        const db = getFirestore(app);

        //add data
        // const citiesRef = collection(db, "cities");

        // await setDoc(doc(citiesRef, "SF"), {
        //     name: "San Francisco", state: "CA", country: "USA",
        //     capital: false, population: 860000,
        //     regions: ["west_coast", "norcal"] });
        // await setDoc(doc(citiesRef, "LA"), {
        //     name: "Los Angeles", state: "CA", country: "USA",
        //     capital: false, population: 3900000,
        //     regions: ["west_coast", "socal"] });
        // await setDoc(doc(citiesRef, "DC"), {
        //     name: "Washington, D.C.", state: null, country: "USA",
        //     capital: true, population: 680000,
        //     regions: ["east_coast"] });
        // await setDoc(doc(citiesRef, "TOK"), {
        //     name: "Tokyo", state: null, country: "Japan",
        //     capital: true, population: 9000000,
        //     regions: ["kanto", "honshu"] });
        // await setDoc(doc(citiesRef, "BJ"), {
        //     name: "Beijing", state: null, country: "China",
        //     capital: true, population: 21500000,
        //     regions: ["jingjinji", "hebei"] });

        // const docRef = doc(db, "cities", "SF");
        // const docSnap = await getDoc(docRef);

        // if (docSnap.exists()) {
        // console.log("Document data:", docSnap.data());
        // } else {
        // // docSnap.data() will be undefined in this case
        // console.log("No such document!");
        // }

        // const docVol = doc(db, "volunteerObj", "sds2PIzioLcEdP56186S");
        // const docSnapVol = await getDoc(docVol);

        // if (docSnapVol.exists()) {
        // console.log("Document data:", docSnapVol.data());
        // } else {
        // // docSnap.data() will be undefined in this case
        // console.log("No such document!");
        // }

        //set Doc

        const docData = {
            address : "5456 W 9th Ave",
            province : "BC",
            city : "Vancouver",
            email : "organization3@gmail.com",
            phoneNumber : "222234567",
            decription : "organization bio",
            name : "Org 3",
            password : "0123456",
            photoLink : "link",
            charitableRegistrationNumber : "222333333",
            otherNonProfit : ""
        };
        const newVolRef = doc(collection(db, "organization"));
    
        // later...
        await setDoc(newVolRef, docData).then(function() {
            })
            .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            // ..
            alert("in save data" + errorMessage);
        });
        // await setDoc(doc(db, "volunteer", "vol1"), docData);

        // const docVol2 = doc(db, "volunteerObj", "vol1");
        // const docSnapVol2 = await getDoc(docVol2);

        // if (docSnapVol2.exists()) {
        // console.log("Document data:", docSnapVol2.data());
        // } else {
        // // docSnap.data() will be undefined in this case
        // console.log("No such document!");
        // }

        // const q = query(collection(db, "volunteer"), and( where("password", "==", "0123456"),where("email", "==", "tpaing00@mylangara.ca")));

        // const querySnapshot = await getDocs(q);
        // querySnapshot.forEach((doc) => {
        // // doc.data() is never undefined for query doc snapshots
        // console.log(doc.id, " => ", doc.data());
        // });
    </script>
</html>